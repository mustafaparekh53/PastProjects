{"version":3,"sources":["../../src/webparts/contractForm/components/FileUpload/FileUpload.tsx"],"names":[],"mappings":"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","file":"webparts/contractForm/components/FileUpload/FileUpload.js","sourcesContent":["import { IFileUploadProps } from \"./IFieUploadProps\";\r\nimport { CSSProperties } from \"react\";\r\nimport React = require(\"react\");\r\nimport { IFileUploadState } from \"./IFileUploadState\";\r\nimport * as stylesImport from \"./FileUpload.module.scss\";\r\nimport { autobind } from \"office-ui-fabric-react/lib/Utilities\";\r\nconst styles: any = stylesImport;\r\n/**\r\n * Created by cheesu on 2015/8/17.\r\n */\r\n\r\n/**\r\n * React文件上传组件，兼容IE8+\r\n * 现代浏览器采用AJAX（XHR2+File API）上传。低版本浏览器使用form+iframe上传。\r\n * 使用到ES6，需要经babel转译\r\n */\r\n\r\n// tslint:disable-next-line:no-empty\r\n// tslint:disable-next-line:typedef\r\nconst emptyFunction = () => {};\r\n/*当前IE上传组的id*/\r\nlet currentIEID: number = 0;\r\n/*存放当前IE上传组的可用情况*/\r\nconst IEFormGroup = [true];\r\n/*当前xhr的数组（仅有已开始上传之后的xhr）*/\r\nlet xhrList = [];\r\nlet currentXHRID = 0;\r\n\r\n// tslint:disable-next-line:typedef\r\nconst PT = React.PropTypes;\r\nexport class FileUpload extends React.Component<any, IFileUploadState> {\r\n  public userAgent: any;\r\n  public IETag: any;\r\n  public fileName: any;\r\n  public textBeforeFiles: any;\r\n  public _withoutFileUpload: any;\r\n  public disabledIEChoose: any;\r\n  public files: any;\r\n  public onabort: any;\r\n  public uploadFail: any;\r\n  public uploadError: any;\r\n  public uploadSuccess: any;\r\n  public uploading: any;\r\n  public doUpload: any;\r\n  public beforeUpload: any;\r\n  public chooseFile: any;\r\n  public beforeChoose: any | false;\r\n  public requestHeaders: any;\r\n  public withCredentials: any;\r\n  public fileFieldName: any;\r\n  public numberLimit: any;\r\n  public multiple: any;\r\n  public accept: any;\r\n  public timeout: any;\r\n  public wrapperDisplay: any;\r\n  public dataType: string;\r\n  public paramAddToField: any;\r\n  public chooseAndUpload: any;\r\n  public param: any;\r\n  public baseUrl: any;\r\n  public isIE: boolean;\r\n  constructor(props: IFileUploadProps) {\r\n    super(props);\r\n  }\r\n  /*根据props更新组件*/\r\n  // tslint:disable-next-line:typedef\r\n  private _updateProps(props) {\r\n    this.isIE = !(this.checkIE() < 0 || this.checkIE() >= 10);\r\n    // tslint:disable-next-line:typedef\r\n    const options = props.options;\r\n    this.baseUrl = options.baseUrl; //域名\r\n    this.param = options.param; //get参数\r\n    this.chooseAndUpload =\r\n      options.AutoUpload || options.chooseAndUpload || false; //是否在用户选择了文件之后立刻上传\r\n    this.paramAddToField = options.paramAddToField || undefined; //需要添加到FormData的对象。不支持IE\r\n    /*upload success 返回resp的格式*/\r\n    this.dataType = \"json\";\r\n    if (options.dataType && options.dataType.toLowerCase() === \"text\") {\r\n      // tslint:disable-next-line:one-line\r\n      this.dataType = \"text\";\r\n    }\r\n    this.wrapperDisplay = options.wrapperDisplay || \"inline-block\"; //包裹chooseBtn或uploadBtn的div的display\r\n    this.timeout =\r\n      typeof options.timeout === \"number\" && options.timeout > 0\r\n        ? options.timeout\r\n        : 0; //超时时间\r\n    this.accept = options.accept || \"\"; //限制文件后缀\r\n    this.multiple = options.multiple || false;\r\n    this.numberLimit = options.numberLimit || false; //允许多文件上传时，选择文件数量的限制\r\n    this.fileFieldName = options.fileFieldName || false; //文件附加到formData上时的key，传入string指定一个file的属性名，值为其属性的值。不支持IE\r\n    this.withCredentials = options.withCredentials || false; //跨域时是否使用认证信息\r\n    this.requestHeaders = options.requestHeaders || false; //要设置的请求头键值对\r\n\r\n    /*生命周期函数*/\r\n    /**\r\n     * beforeChoose() : 用户选择之前执行，返回true继续，false阻止用户选择\r\n     * @param  null\r\n     * @return  {boolean} 是否允许用户进行选择\r\n     */\r\n    this.beforeChoose = options.beforeChoose || emptyFunction;\r\n    /**\r\n     * chooseFile(file) : 用户选择文件后的触发的回调函数\r\n     * @param file {File | string} 现代浏览器返回File对象，IE返回文件名\r\n     * @return\r\n     */\r\n    this.chooseFile = options.chooseFile || emptyFunction;\r\n    /**\r\n     * beforeUpload(file,mill) : 用户上传之前执行，返回true继续，false阻止用户选择\r\n     * @param file {File | string} 现代浏览器返回File对象，IE返回文件名\r\n     * @param mill {long} 毫秒数，如果File对象已有毫秒数则返回一样的\r\n     * @return  {boolean || object} 是否允许用户进行上传 (hack:如果是obj{\r\n     *     assign:boolean 默认true\r\n     *     param:object\r\n     * }), 则对本次的param进行处理\r\n     */\r\n    this.beforeUpload = options.beforeUpload || emptyFunction;\r\n    /**\r\n     * doUpload(file,mill) : 上传动作(xhr send | form submit)执行后调用\r\n     * @param file {File | string} 现代浏览器返回File对象，IE返回文件名\r\n     * @param mill {long} 毫秒数，如果File对象已有毫秒数则返回一样的\r\n     * @return\r\n     */\r\n    this.doUpload = options.doUpload || emptyFunction;\r\n    /**\r\n     * uploading(progress) : 在文件上传中的时候，浏览器会不断触发此函数。IE中使用每200ms触发的假进度\r\n     * @param progress {Progress} progress对象，里面存有例如上传进度loaded和文件大小total等属性\r\n     * @return\r\n     */\r\n    this.uploading = options.uploading || emptyFunction;\r\n    /**\r\n     * uploadSuccess(resp) : 上传成功后执行的回调（针对AJAX而言）\r\n     * @param resp {json | string} 根据options.dataType指定返回数据的格式\r\n     * @return\r\n     */\r\n    this.uploadSuccess = options.uploadSuccess || emptyFunction;\r\n    /**\r\n     * uploadError(err) : 上传错误后执行的回调（针对AJAX而言）\r\n     * @param err {Error | object} 如果返回catch到的error，其具有type和message属性\r\n     * @return\r\n     */\r\n    this.uploadError = options.uploadError || emptyFunction;\r\n    /**\r\n     * uploadFail(resp) : 上传失败后执行的回调（针对AJAX而言）\r\n     * @param resp {string} 失败信息\r\n     */\r\n    this.uploadFail = options.uploadFail || emptyFunction;\r\n    /**\r\n     * onabort(mill, xhrID) : 主动取消xhr进程的响应\r\n     * @param mill {long} 毫秒数，本次上传时刻的时间\r\n     * @param xhrID {int} 在doUpload时会返回的当次xhr代表ID\r\n     */\r\n    this.onabort = options.onabort || emptyFunction;\r\n\r\n    this.files = options.files || this.files || false; //保存需要上传的文件\r\n    /*特殊内容*/\r\n\r\n    /*IE情况下，由于上传按钮被隐藏的input覆盖，不能进行disabled按钮处理。\r\n         * 所以当disabledIEChoose为true（或者func返回值为true）时，禁止IE上传。\r\n         */\r\n    this.disabledIEChoose = options.disabledIEChoose || false;\r\n\r\n    this._withoutFileUpload = options._withoutFileUpload || false; //不带文件上传，为了给秒传功能使用，不影响IE\r\n    this.filesToUpload = options.filesToUpload || []; //使用filesToUpload()方法代替\r\n    this.textBeforeFiles = options.textBeforeFiles || false; //make this true to add text fields before file data\r\n    /*使用filesToUpload()方法代替*/\r\n    if (this.filesToUpload.length && !this.isIE) {\r\n      this.files.forEach(file => {\r\n        this.files = [file];\r\n        this.commonUpload();\r\n      });\r\n    }\r\n\r\n    /*放置虚拟DOM*/\r\n    // tslint:disable-next-line:typedef\r\n    let chooseBtn,\r\n      uploadBtn,\r\n      flag = 0;\r\n    // tslint:disable-next-line:typedef\r\n    const before = [],\r\n      middle = [],\r\n      after = [];\r\n    if (this.chooseAndUpload) {\r\n      React.Children.forEach(props.children, (child: any) => {\r\n        if (child && child.ref === \"chooseAndUpload\") {\r\n          chooseBtn = child;\r\n          flag++;\r\n        } else {\r\n          // tslint:disable-next-line:no-unused-expression\r\n          flag === 0\r\n            ? before.push(child)\r\n            : flag === 1\r\n              ? middle.push(child)\r\n              : // tslint:disable-next-line:no-unused-expression\r\n                \"\";\r\n        }\r\n      });\r\n    } else {\r\n      React.Children.forEach(props.children, (child: any) => {\r\n        if (child && child.ref === \"chooseBtn\") {\r\n          chooseBtn = child;\r\n          flag++;\r\n        } else if (child && child.ref === \"uploadBtn\") {\r\n          uploadBtn = child;\r\n          flag++;\r\n        } else {\r\n          flag === 0\r\n            ? before.push(child)\r\n            : flag === 1\r\n              ? middle.push(child)\r\n              : after.push(child);\r\n        }\r\n      });\r\n    }\r\n    this.setState({\r\n      chooseBtn,\r\n      uploadBtn,\r\n      before,\r\n      middle,\r\n      after\r\n    });\r\n  }\r\n\r\n  /*触发隐藏的input框选择*/\r\n  /*触发beforeChoose*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private commonChooseFile() {\r\n    // tslint:disable-next-line:typedef\r\n    const jud = this.beforeChoose();\r\n    if (jud !== true && jud !== undefined) {\r\n      return;\r\n    }\r\n    (this.refs.ajax_upload_file_input as any).click();\r\n  }\r\n  /*现代浏览器input change事件。File API保存文件*/\r\n  /*触发chooseFile*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private commonChange(e) {\r\n    // tslint:disable-next-line:typedef\r\n    let files;\r\n    e.dataTransfer\r\n      ? (files = e.dataTransfer.files)\r\n      : // tslint:disable-next-line:no-unused-expression\r\n        e.target\r\n        ? (files = e.target.files)\r\n        : // tslint:disable-next-line:no-unused-expression\r\n          \"\";\r\n\r\n    /*如果限制了多文件上传时的数量*/\r\n    // tslint:disable-next-line:typedef\r\n    const numberLimit =\r\n      typeof this.numberLimit === \"function\"\r\n        ? this.numberLimit()\r\n        : this.numberLimit;\r\n    if (this.multiple && numberLimit && files.length > numberLimit) {\r\n      // tslint:disable-next-line:typedef\r\n      const newFiles = [];\r\n      // tslint:disable-next-line:typedef\r\n      for (let i = 0; i < numberLimit; i++) {\r\n        newFiles[i] = files[i];\r\n      }\r\n      newFiles.length = numberLimit;\r\n      files = newFiles;\r\n    }\r\n    this.files = files;\r\n    this.chooseFile(files);\r\n    // tslint:disable-next-line:no-unused-expression\r\n    const mill: any =\r\n      (this.files.length && this.files[0].mill) || new Date().getTime();\r\n    this.chooseAndUpload && this.doUpload(this.files, mill); // this.commonUpload();\r\n  }\r\n  /*执行上传*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private commonUpload() {\r\n    /*mill参数是当前时刻毫秒数，file第一次进行上传时会添加为file的属性，也可在beforeUpload为其添加，之后同一文件的mill不会更改，作为文件的识别id*/\r\n    // tslint:disable-next-line:typedef\r\n    const mill =\r\n      (this.files.length && this.files[0].mill) || new Date().getTime();\r\n    // tslint:disable-next-line:typedef\r\n    const jud = this.beforeUpload(this.files, mill);\r\n    if (jud !== true && jud !== undefined && typeof jud !== \"object\") {\r\n      /*清除input的值*/\r\n      (this.refs.ajax_upload_file_input as any).value = \"\";\r\n      return;\r\n    }\r\n\r\n    // tslint:disable-next-line:curly\r\n    if (!this.files) return;\r\n    // tslint:disable-next-line:curly\r\n    if (!this.baseUrl) throw new Error(\"baseUrl missing in options\");\r\n\r\n    /*用于存放当前作用域的东西*/\r\n    // tslint:disable-next-line:typedef\r\n    const scope = { isTimeout: false };\r\n    /*组装FormData*/\r\n    // tslint:disable-next-line:typedef\r\n    let formData = new FormData();\r\n    /*If we need to add fields before file data append here*/\r\n    if (this.textBeforeFiles) {\r\n      formData = this.appendFieldsToFormData(formData);\r\n    }\r\n    if (!this._withoutFileUpload) {\r\n      // tslint:disable-next-line:typedef\r\n      const fieldNameType = typeof this.fileFieldName;\r\n\r\n      /*判断是用什么方式作为formdata item 的 name*/\r\n      Object.keys(this.files).forEach(key => {\r\n        // tslint:disable-next-line:curly\r\n        if (key === \"length\") return;\r\n\r\n        if (fieldNameType === \"function\") {\r\n          // tslint:disable-next-line:typedef\r\n          const file = this.files[key];\r\n          // tslint:disable-next-line:typedef\r\n          const fileFieldName = this.fileFieldName(file);\r\n          formData.append(fileFieldName, file);\r\n        } else if (fieldNameType === \"string\") {\r\n          // tslint:disable-next-line:typedef\r\n          const file = this.files[key];\r\n          formData.append(this.fileFieldName, file);\r\n        } else {\r\n          // tslint:disable-next-line:typedef\r\n          const file = this.files[key];\r\n          formData.append(file.name, file);\r\n        }\r\n      });\r\n    }\r\n    /*If we need to add fields after file data append here*/\r\n    if (!this.textBeforeFiles) {\r\n      formData = this.appendFieldsToFormData(formData);\r\n    }\r\n    // tslint:disable-next-line:typedef\r\n    const baseUrl = this.baseUrl;\r\n\r\n    /*url参数*/\r\n    /*如果param是一个函数*/\r\n    // tslint:disable-next-line:typedef\r\n    const param =\r\n      typeof this.param === \"function\" ? this.param(this.files) : this.param;\r\n\r\n    // tslint:disable-next-line:typedef\r\n    let paramStr = \"\";\r\n\r\n    if (param) {\r\n      // tslint:disable-next-line:typedef\r\n      const paramArr = [];\r\n      param._ = mill;\r\n      Object.keys(param).forEach(key => paramArr.push(`${key}=${param[key]}`));\r\n      paramStr = \"?\" + paramArr.join(\"&\");\r\n    }\r\n    // tslint:disable-next-line:typedef\r\n    const targeturl = baseUrl + paramStr;\r\n\r\n    /*AJAX上传部分*/\r\n    // tslint:disable-next-line:typedef\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", targeturl, true);\r\n\r\n    /*跨域是否开启验证信息*/\r\n    xhr.withCredentials = this.withCredentials;\r\n    /*是否需要设置请求头*/\r\n    // tslint:disable-next-line:typedef\r\n    const rh = this.requestHeaders;\r\n    // tslint:disable-next-line:no-unused-expression\r\n    rh &&\r\n      Object.keys(rh).forEach(key => {\r\n        xhr.setRequestHeader(key, rh[key]);\r\n      });\r\n\r\n    /*处理超时。用定时器判断超时，不然xhr state=4 catch的错误无法判断是超时*/\r\n    if (this.timeout) {\r\n      xhr.timeout = this.timeout;\r\n      xhr.ontimeout = () => {\r\n        this.uploadError({ type: \"TIMEOUTERROR\", message: \"timeout\" });\r\n        scope.isTimeout = false;\r\n      };\r\n      scope.isTimeout = false;\r\n      setTimeout(() => {\r\n        scope.isTimeout = true;\r\n      }, this.timeout);\r\n    }\r\n\r\n    xhr.onreadystatechange = () => {\r\n      /*xhr finish*/\r\n      try {\r\n        if (xhr.readyState === 4 && xhr.status >= 200 && xhr.status < 400) {\r\n          // tslint:disable-next-line:typedef\r\n          const resp =\r\n            this.dataType === \"json\"\r\n              ? JSON.parse(xhr.responseText)\r\n              : xhr.responseText;\r\n          this.uploadSuccess(resp);\r\n        } else if (xhr.readyState === 4) {\r\n          /*xhr fail*/\r\n          // tslint:disable-next-line:typedef\r\n          const resp =\r\n            this.dataType === \"json\"\r\n              ? JSON.parse(xhr.responseText)\r\n              : xhr.responseText;\r\n          this.uploadFail(resp);\r\n        }\r\n      } catch (e) {\r\n        /*超时抛出不一样的错误，不在这里处理*/\r\n        // tslint:disable-next-line:no-unused-expression\r\n        !scope.isTimeout &&\r\n          this.uploadError({ type: \"FINISHERROR\", message: e.message });\r\n      }\r\n    };\r\n    /*xhr error*/\r\n    xhr.onerror = () => {\r\n      try {\r\n        // tslint:disable-next-line:typedef\r\n        const resp =\r\n          this.dataType === \"json\"\r\n            ? JSON.parse(xhr.responseText)\r\n            : xhr.responseText;\r\n        this.uploadError({ type: \"XHRERROR\", message: resp });\r\n      } catch (e) {\r\n        this.uploadError({ type: \"XHRERROR\", message: e.message });\r\n      }\r\n    };\r\n    /*这里部分浏览器实现不一致，而且IE没有这个方法*/\r\n    xhr.onprogress = xhr.upload.onprogress = progress => {\r\n      this.uploading(progress, mill);\r\n    };\r\n\r\n    /*不带文件上传，给秒传使用*/\r\n    this._withoutFileUpload ? xhr.send(null) : xhr.send(formData);\r\n\r\n    /*保存xhr id*/\r\n    xhrList.push(xhr);\r\n    // tslint:disable-next-line:typedef\r\n    const cID = xhrList.length - 1;\r\n    currentXHRID = cID;\r\n\r\n    /*有响应abort的情况*/\r\n    xhr.onabort = () => this.onabort(mill, cID);\r\n\r\n    /*trigger执行上传的用户回调*/\r\n    this.doUpload(this.files, mill, currentXHRID);\r\n\r\n    /*清除input的值*/\r\n    (this.refs.ajax_upload_file_input as any).value = \"\";\r\n  }\r\n\r\n  /*组装自定义添加到FormData的对象*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private appendFieldsToFormData(formData) {\r\n    // tslint:disable-next-line:typedef\r\n    const field =\r\n      typeof this.paramAddToField === \"function\"\r\n        ? this.paramAddToField()\r\n        : this.paramAddToField;\r\n    // tslint:disable-next-line:no-unused-expression\r\n    field &&\r\n      Object.keys(field).map(index => formData.append(index, field[index]));\r\n    return formData;\r\n  }\r\n\r\n  /*iE选择前验证*/\r\n  /*触发beforeChoose*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private IEBeforeChoose(e) {\r\n    // tslint:disable-next-line:typedef\r\n    const jud = this.beforeChoose();\r\n    // tslint:disable-next-line:no-unused-expression\r\n    jud !== true && jud !== undefined && e.preventDefault();\r\n  }\r\n  /*IE需要用户真实点击上传按钮，所以使用透明按钮*/\r\n  /*触发chooseFile*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private IEChooseFile(e) {\r\n    this.fileName = e.target.value.substring(\r\n      e.target.value.lastIndexOf(\"\\\\\") + 1\r\n    );\r\n    this.chooseFile(this.fileName);\r\n    /*先执行IEUpload，配置好action等参数，然后submit*/\r\n    // tslint:disable-next-line:no-unused-expression\r\n    this.chooseAndUpload &&\r\n      this.IEUpload() !== false &&\r\n      (document.getElementById(\r\n        `ajax_upload_file_form_${this.IETag}${currentIEID}`\r\n      ) as any).submit();\r\n    e.target.blur();\r\n  }\r\n  /*IE处理上传函数*/\r\n  /*触发beforeUpload doUpload*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private IEUpload(e?) {\r\n    // tslint:disable-next-line:typedef\r\n    const mill = new Date().getTime();\r\n    // tslint:disable-next-line:typedef\r\n    const jud = this.beforeUpload(this.fileName, mill);\r\n    if (!this.fileName || (jud !== true && jud !== undefined)) {\r\n      // tslint:disable-next-line:no-unused-expression\r\n      e && e.preventDefault();\r\n      return false;\r\n    }\r\n    // tslint:disable-next-line:typedef\r\n    const that = this;\r\n\r\n    /*url参数*/\r\n    // tslint:disable-next-line:typedef\r\n    const baseUrl = this.baseUrl;\r\n\r\n    // tslint:disable-next-line:typedef\r\n    const param =\r\n      typeof this.param === \"function\" ? this.param(this.fileName) : this.param;\r\n    // tslint:disable-next-line:typedef\r\n    let paramStr = \"\";\r\n\r\n    if (param) {\r\n      // tslint:disable-next-line:typedef\r\n      const paramArr = [];\r\n      param._ = mill;\r\n      // tslint:disable-next-line:no-unused-expression\r\n      param.ie === undefined && (param.ie = \"true\");\r\n      for (const key in param) {\r\n        // tslint:disable-next-line:curly\r\n        if (param[key] !== undefined) paramArr.push(`${key}=${param[key]}`);\r\n      }\r\n      paramStr = \"?\" + paramArr.join(\"&\");\r\n    }\r\n    // tslint:disable-next-line:typedef\r\n    const targeturl = baseUrl + paramStr;\r\n\r\n    document\r\n      .getElementById(`ajax_upload_file_form_${this.IETag}${currentIEID}`)\r\n      .setAttribute(\"action\", targeturl);\r\n    /*IE假的上传进度*/\r\n    // tslint:disable-next-line:typedef\r\n    const getFakeProgress = this.fakeProgress();\r\n    // tslint:disable-next-line:typedef\r\n    let loaded = 0,\r\n      // tslint:disable-next-line:typedef\r\n      count = 0;\r\n\r\n    // tslint:disable-next-line:typedef\r\n    const progressInterval = setInterval(() => {\r\n      loaded = getFakeProgress(loaded);\r\n      this.uploading(\r\n        {\r\n          loaded,\r\n          total: 100\r\n        },\r\n        mill\r\n      );\r\n      /*防止永久执行，设定最大的次数。暂时为30秒(200*150)*/\r\n      // tslint:disable-next-line:no-unused-expression\r\n      ++count >= 150 && clearInterval(progressInterval);\r\n    }, 200);\r\n\r\n    /*当前上传id*/\r\n    // tslint:disable-next-line:typedef\r\n    const partIEID = currentIEID;\r\n    /*回调函数*/\r\n\r\n    document\r\n      .getElementById(`ajax_upload_file_frame_${this.IETag}${partIEID}`)\r\n      .addEventListener(\"load\", handleOnLoad);\r\n\r\n    // tslint:disable-next-line:typedef\r\n    function handleOnLoad() {\r\n      /*clear progress interval*/\r\n      clearInterval(progressInterval);\r\n      try {\r\n        that.uploadSuccess(that.IECallback(that.dataType, partIEID));\r\n      } catch (e) {\r\n        that.uploadError(e);\r\n      } finally {\r\n        /*清除输入框的值*/\r\n        // tslint:disable-next-line:typedef\r\n        const oInput = document.getElementById(\r\n          `ajax_upload_hidden_input_${that.IETag}${partIEID}`\r\n        );\r\n        oInput.outerHTML = oInput.outerHTML;\r\n      }\r\n    }\r\n    this.doUpload(this.fileName, mill);\r\n    /*置为非空闲*/\r\n    IEFormGroup[currentIEID] = false;\r\n  }\r\n  /*IE回调函数*/\r\n  //TODO 处理Timeout\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private IECallback(dataType, frameId) {\r\n    /*回复空闲状态*/\r\n    IEFormGroup[frameId] = true;\r\n\r\n    // tslint:disable-next-line:typedef\r\n    const frame = document.getElementById(\r\n      `ajax_upload_file_frame_${this.IETag}${frameId}`\r\n    );\r\n    // tslint:disable-next-line:typedef\r\n    const resp = { responseText: \"\", json: {} };\r\n    // tslint:disable-next-line:typedef\r\n    const content = (frame as any).contentWindow\r\n      ? (frame as any).contentWindow.document.body\r\n      : (frame as any).contentDocument.document.body;\r\n    // tslint:disable-next-line:curly\r\n    if (!content) throw new Error(\"Your browser does not support async upload\");\r\n    try {\r\n      resp.responseText = content.innerHTML || \"null innerHTML\";\r\n      // tslint:disable-next-line:no-eval\r\n      resp.json = JSON\r\n        ? JSON.parse(resp.responseText)\r\n        : eval(`(${resp.responseText})`);\r\n    } catch (e) {\r\n      /*如果是包含了<pre>*/\r\n      if (e.message && e.message.indexOf(\"Unexpected token\") >= 0) {\r\n        /*包含返回的json*/\r\n        if (resp.responseText.indexOf(\"{\") >= 0) {\r\n          // tslint:disable-next-line:typedef\r\n          const msg = resp.responseText.substring(\r\n            resp.responseText.indexOf(\"{\"),\r\n            resp.responseText.lastIndexOf(\"}\") + 1\r\n          );\r\n          // tslint:disable-next-line:no-eval\r\n          return JSON ? JSON.parse(msg) : eval(`(${msg})`);\r\n        }\r\n        return { type: \"FINISHERROR\", message: e.message };\r\n      }\r\n      throw e;\r\n    }\r\n    return dataType === \"json\" ? resp.json : resp.responseText;\r\n  }\r\n\r\n  /*外部调用方法，主动触发选择文件（等同于调用btn.click()), 仅支持现代浏览器*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private forwardChoose() {\r\n    // tslint:disable-next-line:curly\r\n    if (this.isIE) return false;\r\n    this.commonChooseFile();\r\n  }\r\n\r\n  /**\r\n   * 外部调用方法，当多文件上传时，用这个方法主动删除列表中某个文件\r\n   * TODO: 此方法应为可以任意操作文件数组\r\n   * @param func 用户调用时传入的函数，函数接收参数files（filesAPI 对象）\r\n   * @return Obj File API 对象\r\n   * File API Obj:\r\n   * {\r\n   *   0 : file,\r\n   *   1 : file,\r\n   *   length : 2\r\n   * }\r\n   */\r\n  @autobind\r\n  private fowardRemoveFile(func: (e: any) => any): void {\r\n    this.files = func(this.files);\r\n  }\r\n\r\n  /*外部调用方法，传入files（File API）对象可以立刻执行上传动作，IE不支持。调用随后会触发beforeUpload*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private filesToUpload(files) {\r\n    if (this.isIE) {\r\n      return;\r\n    }\r\n    this.files = files;\r\n    this.commonUpload();\r\n  }\r\n\r\n  /*外部调用方法，取消一个正在进行的xhr，传入id指定xhr（doupload时返回）或者默认取消最近一个。*/\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private abort(id) {\r\n    id === undefined ? xhrList[currentXHRID].abort() : xhrList[id].abort();\r\n  }\r\n\r\n  /*判断ie版本*/\r\n  // tslint:disable-next-line:typedef\r\n\r\n  private checkIE() {\r\n    // tslint:disable-next-line:typedef\r\n    const userAgent = this.userAgent;\r\n    // tslint:disable-next-line:typedef\r\n    const version = userAgent.indexOf(\"MSIE\");\r\n    // tslint:disable-next-line:curly\r\n    if (version < 0) return -1;\r\n\r\n    return parseFloat(\r\n      userAgent.substring(version + 5, userAgent.indexOf(\";\", version))\r\n    );\r\n  }\r\n\r\n  /*生成假的IE上传进度*/\r\n  // tslint:disable-next-line:typedef\r\n  private fakeProgress() {\r\n    // tslint:disable-next-line:typedef\r\n    let add = 6;\r\n    // tslint:disable-next-line:typedef\r\n    const decrease = 0.3,\r\n      // tslint:disable-next-line:typedef\r\n      end = 98,\r\n      // tslint:disable-next-line:typedef\r\n      min = 0.2;\r\n    return lastTime => {\r\n      // tslint:disable-next-line:typedef\r\n      let start = lastTime;\r\n      // tslint:disable-next-line:curly\r\n      if (start >= end) return start;\r\n\r\n      start += add;\r\n      add = add - decrease;\r\n      // tslint:disable-next-line:no-unused-expression\r\n      add < min && (add = min);\r\n\r\n      return start;\r\n    };\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  private getUserAgent() {\r\n    // tslint:disable-next-line:typedef\r\n    const userAgentString = this.props.options && this.props.options.userAgent;\r\n    // tslint:disable-next-line:typedef\r\n    const navigatorIsAvailable = typeof navigator !== \"undefined\";\r\n    if (!navigatorIsAvailable && !userAgentString) {\r\n      // tslint:disable-next-line:max-line-length\r\n      throw new Error(\r\n        \"`options.userAgent` must be set rendering react-fileuploader in situations when `navigator` is not defined in the global namespace. (on the server, for example)\"\r\n      );\r\n    }\r\n    return navigatorIsAvailable ? navigator.userAgent : userAgentString;\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  private getInitialState() {\r\n    return {\r\n      chooseBtn: {}, //选择按钮。如果chooseAndUpload=true代表选择并上传。\r\n      uploadBtn: {}, //上传按钮。如果chooseAndUpload=true则无效。\r\n      before: [], //存放props.children中位于chooseBtn前的元素\r\n      middle: [], //存放props.children中位于chooseBtn后，uploadBtn前的元素\r\n      after: [] //存放props.children中位于uploadBtn后的元素,\r\n    };\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  @autobind\r\n  public componentWillMount(): void {\r\n    this.userAgent = this.getUserAgent();\r\n    this.isIE = !(this.checkIE() < 0 || this.checkIE() >= 10);\r\n    /*因为IE每次要用到很多form组，如果在同一页面需要用到多个<FileUpload>可以在options传入tag作为区分。并且不随后续props改变而改变*/\r\n    // tslint:disable-next-line:typedef\r\n    const tag = this.props.options && this.props.options.tag;\r\n    this.IETag = tag ? tag + \"_\" : \"\";\r\n\r\n    this._updateProps(this.props);\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  public componentDidMount() {\r\n    // console.log(\"\");\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  public componentWillReceiveProps(newProps) {\r\n    this._updateProps(newProps);\r\n  }\r\n\r\n  // tslint:disable-next-line:typedef\r\n  public render() {\r\n    return this._packRender();\r\n  }\r\n\r\n  /*打包render函数*/\r\n  // tslint:disable-next-line:typedef\r\n  private _packRender() {\r\n    /*IE用iframe表单上传，其他用ajax Formdata*/\r\n    let render: JSX.Element;\r\n    if (this.isIE) {\r\n      render = this._multiIEForm();\r\n    } else {\r\n      // tslint:disable-next-line:typedef\r\n      const restAttrs = {\r\n        accept: this.accept,\r\n        multiple: this.multiple\r\n      };\r\n\r\n      render = (\r\n        <div className={styles.fileUploadContainer}>\r\n          <div className={this.props.className} style={this.props.style}>\r\n            {this.state.before}\r\n            <div\r\n              style={{\r\n                overflow: \"hidden\",\r\n                position: \"relative\",\r\n                display: \"inline-block\"\r\n              }}\r\n            >\r\n              <input\r\n                type=\"file\"\r\n                name=\"ajax_upload_file_input\"\r\n                ref=\"ajax_upload_file_input\"\r\n                onChange={this.commonChange}\r\n                {...restAttrs}\r\n              />\r\n            </div>\r\n            {/** <div onClick={this.commonChooseFile}\r\n                        style={{overflow:\"hidden\",postion:\"relative\",display:this.wrapperDisplay}}\r\n                    >\r\n                        {this.state.chooseBtn}\r\n            </div>*/}\r\n            {this.state.middle}\r\n\r\n            <div\r\n              onClick={this.commonUpload}\r\n              style={{\r\n                overflow: \"hidden\",\r\n                postion: \"relative\",\r\n                display: this.chooseAndUpload ? \"none\" : this.wrapperDisplay\r\n              }}\r\n            >\r\n              {this.state.uploadBtn}\r\n            </div>\r\n            {this.state.after}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return render;\r\n  }\r\n\r\n  /*IE多文件同时上传，需要多个表单+多个form组合。根据currentIEID代表有多少个form。*/\r\n  /*所有不在空闲（正在上传）的上传组都以display:none的形式插入，第一个空闲的上传组会display:block捕捉。*/\r\n  // tslint:disable-next-line:typedef\r\n  private _multiIEForm() {\r\n    // tslint:disable-next-line:typedef\r\n    const formArr = [];\r\n    // tslint:disable-next-line:typedef\r\n    let hasFree = false;\r\n\r\n    /* IE情况下，由于上传按钮被隐藏的input覆盖，不能进行disabled按钮处理。\r\n         * 所以当disabledIEChoose为true（或者func返回值为true）时，禁止IE上传。\r\n         */\r\n    // tslint:disable-next-line:typedef\r\n    const isDisabled =\r\n      typeof this.disabledIEChoose === \"function\"\r\n        ? this.disabledIEChoose()\r\n        : this.disabledIEChoose;\r\n\r\n    /*这里IEFormGroup的长度会变，所以不能存len*/\r\n    // tslint:disable-next-line:typedef\r\n    for (let i = 0; i < IEFormGroup.length; i++) {\r\n      _insertIEForm.call(this, formArr, i);\r\n      /*如果当前上传组是空闲，hasFree=true，并且指定当前上传组ID*/\r\n      if (IEFormGroup[i] && !hasFree) {\r\n        hasFree = true;\r\n        currentIEID = i;\r\n      }\r\n      /*如果所有上传组都不是空闲状态，push一个新增组*/\r\n      // tslint:disable-next-line:no-unused-expression\r\n      i === IEFormGroup.length - 1 && !hasFree && IEFormGroup.push(true);\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={this.props.className}\r\n        style={this.props.style}\r\n        id=\"react-file-uploader\"\r\n      >\r\n        {formArr}\r\n      </div>\r\n    );\r\n\r\n    // tslint:disable-next-line:typedef\r\n    function _insertIEForm(formArr2, i) {\r\n      /*如果已经push了空闲组而当前也是空闲组*/\r\n      // tslint:disable-next-line:curly\r\n      if (IEFormGroup[i] && hasFree) return;\r\n      /*是否display*/\r\n      // tslint:disable-next-line:typedef\r\n      const isShow = IEFormGroup[i];\r\n      /*Input内联样式*/\r\n      // tslint:disable-next-line:typedef\r\n      const style: CSSProperties = {\r\n        position: \"absolute\",\r\n        left: \"-30px\",\r\n        top: 0,\r\n        zIndex: 50,\r\n        fontSize: \"80px\",\r\n        width: \"200px\",\r\n        opacity: 0,\r\n        filter: \"alpha(opacity=0)\"\r\n      };\r\n\r\n      /*是否限制了文件后缀，以及是否disabled*/\r\n      // tslint:disable-next-line:typedef\r\n      const restAttrs = {\r\n        accept: this.accept,\r\n        disabled: isDisabled\r\n      };\r\n\r\n      // tslint:disable-next-line:typedef\r\n      const input = (\r\n        <input\r\n          type=\"file\"\r\n          name={`ajax_upload_hidden_input_${i}`}\r\n          id={`ajax_upload_hidden_input_${i}`}\r\n          ref={`ajax_upload_hidden_input_${i}`}\r\n          onChange={this.IEChooseFile}\r\n          onClick={this.IEBeforeChoose}\r\n          style={style}\r\n          {...restAttrs}\r\n        />\r\n      );\r\n\r\n      i = `${this.IETag}${i}`;\r\n      formArr2.push(\r\n        <form\r\n          id={`ajax_upload_file_form_${i}`}\r\n          method=\"post\"\r\n          target={`ajax_upload_file_frame_${i}`}\r\n          key={`ajax_upload_file_form_${i}`}\r\n          encType=\"multipart/form-data\"\r\n          ref={`form_${i}`}\r\n          onSubmit={this.IEUpload}\r\n          style={{ display: isShow ? \"block\" : \"none\" }}\r\n        >\r\n          {this.state.before}\r\n          <div\r\n            style={{\r\n              overflow: \"hidden\",\r\n              position: \"relative\",\r\n              display: \"inline-block\"\r\n            }}\r\n          >\r\n            {this.state.chooseBtn}\r\n            {/*input file 的name不能省略*/}\r\n            {input}\r\n          </div>\r\n          {this.state.middle}\r\n          <div\r\n            style={{\r\n              overflow: \"hidden\",\r\n              position: \"relative\",\r\n              display: this.chooseAndUpload ? \"none\" : this.wrapperDisplay\r\n            }}\r\n          >\r\n            {this.state.uploadBtn}\r\n            <input\r\n              type=\"submit\"\r\n              style={{\r\n                position: \"absolute\",\r\n                left: 0,\r\n                top: 0,\r\n                fontSize: \"50px\",\r\n                width: \"200px\",\r\n                opacity: 0\r\n              }}\r\n            />\r\n          </div>\r\n          {this.state.after}\r\n        </form>\r\n      );\r\n      formArr2.push(\r\n        <iframe\r\n          id={`ajax_upload_file_frame_${i}`}\r\n          name={`ajax_upload_file_frame_${i}`}\r\n          key={`ajax_upload_file_frame_${i}`}\r\n          className=\"ajax_upload_file_frame\"\r\n          style={{\r\n            display: \"none\",\r\n            width: 0,\r\n            height: 0,\r\n            margin: 0,\r\n            border: 0\r\n          }}\r\n        />\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\..\\..\\src"}